<!DOCTYPE html>
<html lang="en">
<head>
<title>CSS Template</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" src="data.json"></script>
<style>
* {
    box-sizing: border-box;
}

body {
    font-family: Arial, Helvetica, sans-serif;
		color:white;
}
nav {
    float: left;
    width: 30%;
    height: 500px; 
    background: #323544;
    padding: 20px;
}
article {
    float: left;
    padding: 20px;
    width: 70%;
    background-color: #292A35;
    height: 500px; 
}

.listItem{
height:60px;
float:top;
}
.userImg{
	padding-top: 5px;
	padding-left: 2px;
	width: 15%;
    float: left;
}
#userImgBig{
padding-bottom:100px;
}
.nameAndBday{
	width: 80	%;
	height:100%;
	float:left;
}
h1{
	font-size: 25px;
	padding-left:10px;
	margin-top:10px;
}
h2{
	font-size: 20px;
	padding-left:10px;
	margin-top:10px;
}
h3{
	font-size: 15px;
	padding-left:10px;
	position: relative;
	bottom:10px;
}
.deleteImg{
	width: 5%;
    float: right;
	margin-top:20px;
}
#details{
	width: 85%;
	float: left;
	padding-left:20px;

}
#listHeader{
	padding-bottom:70px;
}
#usersTxt{
	float:left;
}
#addUserImg{
	width:10%;
	float:right;
	padding-top:10px;
}
#sortUsersImg{
	width:10%;
	float:right;
	padding-top:10px;
}
</style>
</head>
<body> 	

  <nav id = "nav">
	<div id= "listHeader">
		<h1 id= "usersTxt">Users</h1>
		<img id = "addUserImg" onclick="showAddUserForm()" src="addUser.png">
		<img id = "sortUsersImg" onclick="sortUsers()" src="sortImg.png">
	</div>
	<div id="userslist">  
	</div>
  </nav>

  <article>
    <h1>Full Details</h1>   
	<h2 id = "uploadBtn"> </h2>
	<img id = "userImgBig" class = "userImg"/> 
	<div id="details">
		<h2 id="id"></h2>
		<h3>ID</h3>
		
		<h2 id="fName"></h2>
		<h3>First Name</h3>
		
		<h2 id="lName"></h2>
		<h3>Last Name</h3>
		
		<h2 id="bDay"></h2>
		<h3>Birth Date</h3>
		
		<h2 id="submit"> </h2>
		
	</div>
  </article>


<script>

function showUserslist() {
	var out = "";
    for(var i = 0; i<data.length; i++) {
		out += '<div class = "listItem" onclick="showUserById(' + data[i].id + ')"><img class = "userImg" src="' + data[i].profileImage + '"><div class = "nameAndBday"><h2 id="name"> ' + data[i].firstName + ' ' + data[i].lastName + '</h2><h3> ' + formatDate(new Date(data[i].birthDate)) + '</h3></div><img class = "deleteImg" src="deleteIcon.png" onclick="deleteUserById(' + data[i].id + ')">	</div>';
        //out += '<div class = "listItem" onclick="showUserById(1226176321)"> <img class = "userImg" src="' + arr[i].profileImage + '"><div class = "nameAndBday"><h2 id="name">' + arr[i].firstName + ' ' + arr[i].lastName + '</h2><h3>' + formatDate(new Date(arr[i].birthDate)) + '</h3></div>';
    }
    document.getElementById("userslist").innerHTML = out;
}
showUserslist();

function formatDate(date) {
  var monthNames = [
    "January", "February", "March",
    "April", "May", "June", "July",
    "August", "September", "October",
    "November", "December"
  ];

  var day = date.getDate();
  var monthIndex = date.getMonth();
  var year = date.getFullYear();
  return monthNames[monthIndex] + ' ' + day + ', ' + year;
}


function showUserById(id){
	for(var i = 0; i<data.length; i++) {
	
		if(data[i].id==id){
			document.getElementById("userImgBig").src = data[i].profileImage;
			document.getElementById("id").innerHTML = data[i].id;
			document.getElementById("fName").innerHTML = data[i].firstName;
			document.getElementById("lName").innerHTML = data[i].lastName;
			document.getElementById("bDay").innerHTML = formatDate(new Date(data[i].birthDate));
			return;
		}
	
	}
}
showUserById(data[0].id);


function deleteUserById(id){
	for(var i = 0; i<data.length; i++){
		if(data[i].id==id){
			temp = data[0];        // putting found elemnt at furst position to shift()
			data[0] = data[i];
			data[i] = temp;
			data.shift();
			break;
		}
	}
	showUserslist();
}

function showAddUserForm(){
	document.getElementById("uploadBtn").innerHTML = '<input type="file" id="selectedImg"/>';
	document.getElementById("userImgBig").src = "plusImg.png";	
	document.getElementById("id").innerHTML = 'A uniqe Id will be provided.';
	document.getElementById("fName").innerHTML = '<input type="text" id="fNameBox">';
	document.getElementById("lName").innerHTML = '<input type="text" id="lNameBox">';
	document.getElementById("bDay").innerHTML = '<input type="date" id="bDayBox">';
	document.getElementById("submit").innerHTML = '<button onclick="addUser()">send</button>';
}

function addUser(){

	var newUser = {
				id: uniqueId(),												//uniqueId(), 
				firstName: document.getElementById("fNameBox").value,						//getElementById("fnameBox").value, 
				lastName: document.getElementById("lNameBox").value,							//getElementById("lNameBox").value, 
				birthDate: document.getElementById("bDayBox").value,				//getElementById("bDayBox").value, 
				profileImage: document.getElementById("selectedImg").files[0].name													//"./profile-image01.png"
				};
	
	data.push(newUser);
	showUserslist();
	showUserById(data[data.length-1].id);
	document.getElementById("submit").innerHTML = '';
}

function uniqueId() {
  return 'id-' + Math.random().toString(36).substr(2, 16);
}

function extractFileName(fullPath){
alert(fullPath);
var fullPath = document.getElementById('upload').value;
if (fullPath) {
    var startIndex = (fullPath.indexOf('\\') >= 0 ? fullPath.lastIndexOf('\\') : fullPath.lastIndexOf('/'));
    var filename = fullPath.substring(startIndex);
    if (filename.indexOf('\\') === 0 || filename.indexOf('/') === 0) {
        filename = filename.substring(1);
    }
    return filename;
}
}

function sortUsers(){
	data.sort(compare);
	showUserslist();
}
function compare(a,b) {
  if (a.firstName < b.firstName)
    return -1;
  if (a.firstName > b.firstName)
    return 1;
  return 0;
}
</script>



</body>
</html>
